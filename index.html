<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="SouthCity Timesheet Manager">
    <meta name="author" content="Brad Cade">

    <!-- Main Login Page StyleSheet-->
    <link href="css/homestyles.css" rel="stylesheet">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

    <title>South City Timesheet Manager</title>
</head>

<body>
    <div class="intro-lead-in">Welcome, Please sign-in or out below:</div>

    <!-- Dropdown Menu -->
    <form class="dropdown-menu-staff-select" id="selectstaffmember" method="post">
        <select id="first-choice">
            <option selected value="base">Please Select</option>
            <option value="party">South City Party Nibbles</option>
            <br><br><br><br>
            <option value="electrical">South City Electrical & Security</option>
        </select>

        <br>

        <select id="second-choice">
            <option>Please choose from above</option>
        </select>
        <br><br><br><br>
        <input class="buttons" type="submit" name="submit" value="Sign in" action="sendsignintodatabase.php" />
        <input class="buttons" type="submit" name="submit" value="Sign out" action="sendsignouttodatabase.php" />
    </form>
    
    <br><br><br>

    <!-- Time -->
    <div class="timeClock" id="currentTime" align="center">
        <p>Loading Time...</p>
    </div>

    <script>
        $("#first-choice").change(function() {

            var $dropdown = $(this);

            $.getJSON("staff/staff.json", function(data) {

                var key = $dropdown.val();
                var vals = [];

                switch (key) {
                    case 'party':
                        vals = data.party.split(",");
                        break;
                    case 'electrical':
                        vals = data.electrical.split(",");
                        break;
                    case 'base':
                        vals = ['Please choose from above'];
                }

                var $secondChoice = $("#second-choice");
                $secondChoice.empty();
                $.each(vals, function(index, value) {
                    $secondChoice.append("<option>" + value + "</option>");
                });

            });
        });

        tday = new Array("Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday");
        tmonth = new Array("January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December");

        function GetClock() {
            var d = new Date();
            var nday = d.getDay(),
                nmonth = d.getMonth(),
                ndate = d.getDate(),
                nyear = d.getYear();
            if (nyear < 1000) nyear += 1900;
            var nhour = d.getHours(),
                nmin = d.getMinutes(),
                nsec = d.getSeconds(),
                ap;

            if (nhour == 0) {
                ap = " AM";
                nhour = 12;
            } else if (nhour < 12) {
                ap = " AM";
            } else if (nhour == 12) {
                ap = " PM";
            } else if (nhour > 12) {
                ap = " PM";
                nhour -= 12;
            }

            if (nmin <= 9) nmin = "0" + nmin;
            if (nsec <= 9) nsec = "0" + nsec;

            setTimeout(timeLoadFunc, 1000);

            function timeLoadFunc() {
                document.getElementById('currentTime').innerHTML = "" + tday[nday] + ", " + tmonth[nmonth] + " " + ndate + ", " + nyear + " " + nhour + ":" + nmin + ":" + nsec + ap + "";
            }
        }


        window.onload = function() {
            GetClock();
            setInterval(GetClock, 1000);
        }

    </script>
</body>

</html>
